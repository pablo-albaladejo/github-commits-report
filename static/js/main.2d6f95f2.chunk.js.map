{"version":3,"sources":["context/index.js","pages/login/index.js","components/layout/main/index.js","pages/home/index.js","pages/error/index.js","router/index.js","pages/main/index.js","store/reducer/index.js","App.js","reportWebVitals.js","index.js"],"names":["AuthContext","React","createContext","Login","useContext","state","dispatch","useState","errorMessage","isLoading","data","setData","client_id","redirect_uri","useEffect","url","window","location","href","includes","newUrl","split","history","pushState","requestData","client_secret","code","proxy_url","fetch","method","body","JSON","stringify","then","response","json","type","payload","user","isLoggedIn","catch","error","to","Wrapper","className","onClick","Styled","section","MainLayout","children","MainPage","ErrorPage","ProtectedRoute","Component","component","props","render","localProps","Home","basename","process","exact","path","HomePage","LoginPage","initialState","parse","localStorage","getItem","REACT_APP_CLIENT_ID","REACT_APP_REDIRECT_URI","REACT_APP_CLIENT_SECRET","REACT_APP_PROXY_URL","reducer","action","setItem","clear","App","useReducer","Provider","value","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2d6f95f2.chunk.js","sourcesContent":["import React from 'react';\nexport const AuthContext = React.createContext();","import React, { useState, useEffect, useContext } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Styled from \"styled-components\";\nimport GithubIcon from \"mdi-react/GithubIcon\";\nimport { AuthContext } from \"../../context\";\n\nexport default function Login() {\n  const { state, dispatch } = useContext(AuthContext);\n  const [data, setData] = useState({ errorMessage: \"\", isLoading: false });\n\n  const { client_id, redirect_uri } = state;\n\n  useEffect(() => {\n    // After requesting Github access, Github redirects back to your app with a code parameter\n    const url = window.location.href;\n    const hasCode = url.includes(\"?code=\");\n\n    // If Github API returns the code parameter\n    if (hasCode) {\n      const newUrl = url.split(\"?code=\");\n      window.history.pushState({}, null, newUrl[0]);\n      setData({ ...data, isLoading: true });\n\n      const requestData = {\n        client_id: state.client_id,\n        redirect_uri: state.redirect_uri,\n        client_secret: state.client_secret,\n        code: newUrl[1]\n      };\n      \n      const proxy_url = state.proxy_url;\n\n      // Use code parameter and other parameters to make POST request to proxy_server\n      fetch(proxy_url, {\n        method: \"POST\",\n        body: JSON.stringify(requestData)\n      })\n        .then(response => response.json())\n        .then(data => {\n          dispatch({\n            type: \"LOGIN\",\n            payload: { user: data, isLoggedIn: true }\n          });\n        })\n        .catch(error => {\n          setData({\n            isLoading: false,\n            errorMessage: \"Sorry! Login failed\"\n          });\n        });\n    }\n  }, [state, dispatch, data]);\n\n  if (state.isLoggedIn) {\n    return <Redirect to=\"/\" />;\n  }\n\n  return (\n    <Wrapper>\n      <section className=\"container\">\n        <div>\n          <h1>Welcome</h1>\n          <span>Super amazing app</span>\n          <span>{data.errorMessage}</span>\n          <div className=\"login-container\">\n            {data.isLoading ? (\n              <div className=\"loader-container\">\n                <div className=\"loader\"></div>\n              </div>\n            ) : (\n              <>\n                {\n                  // Link to request GitHub access\n                }\n                <a\n                  className=\"login-link\"\n                  href={`https://github.com/login/oauth/authorize?scope=user&client_id=${client_id}&redirect_uri=${redirect_uri}`}\n                  onClick={() => {\n                    setData({ ...data, errorMessage: \"\" });\n                  }}\n                >\n                  <GithubIcon />\n                  <span>Login with GitHub</span>\n                </a>\n              </>\n            )}\n          </div>\n        </div>\n      </section>\n    </Wrapper>\n  );\n}\n\nconst Wrapper = Styled.section`\n  .container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    font-family: Arial;\n    \n    > div:nth-child(1) {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.2);\n      transition: 0.3s;\n      width: 25%;\n      height: 45%;\n      > h1 {\n        font-size: 2rem;\n        margin-bottom: 20px;\n      }\n      > span:nth-child(2) {\n        font-size: 1.1rem;\n        color: #808080;\n        margin-bottom: 70px;\n      }\n      > span:nth-child(3) {\n        margin: 10px 0 20px;\n        color: red;\n      }\n      .login-container {\n        background-color: #000;\n        width: 70%;\n        border-radius: 3px;\n        color: #fff;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        > .login-link {\n          text-decoration: none;\n          color: #fff;\n          text-transform: uppercase;\n          cursor: default;\n          display: flex;\n          align-items: center;          \n          height: 40px;\n          > span:nth-child(2) {\n            margin-left: 5px;\n          }\n        }\n        .loader-container {\n          display: flex;\n          justify-content: center;\n          align-items: center;          \n          height: 40px;\n        }\n        .loader {\n          border: 4px solid #f3f3f3;\n          border-top: 4px solid #3498db;\n          border-radius: 50%;\n          width: 12px;\n          height: 12px;\n          animation: spin 2s linear infinite;\n        }\n        @keyframes spin {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n      }\n    }\n  }\n`;","import React from 'react';\nimport './styles.css';\n\nconst MainLayout = ({ children }) =>\n    (<div className=\"container\">\n\n        <div className=\"content\">\n            <div className=\"body\">\n                {children}\n            </div>\n        </div>\n\n\n        <div className=\"footer\">\n            <div className=\"footerItems\">\n                <span>Pablo Albaladejo Mestre</span>\n            </div>\n        </div>\n\n    </div>\n    )\nexport default MainLayout;","import React from 'react';\nimport MainLayout from '../../components/layout/main';\n\nconst MainPage = () => (\n    <MainLayout>\n        <h1>Welcome home!</h1>\n    </MainLayout>\n);\n\nexport default MainPage;\n","import React from 'react';\nimport MainLayout from '../../components/layout/main';\n\nconst ErrorPage = () => (\n    <MainLayout>\n        <h1>ERROR</h1>\n    </MainLayout>\n);\n\nexport default ErrorPage;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { AuthContext } from '../context';\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  const { state } = React.useContext(AuthContext);\n  return (\n    <Route\n      {...props}\n      render={localProps => (\n        state.isLoggedIn ?\n          <Component {...localProps} /> :\n          <Redirect to='/login' />\n      )}\n    />\n  )\n};\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport {\n  BrowserRouter, Switch, Route, Redirect\n} from 'react-router-dom';\nimport LoginPage from '../login';\nimport HomePage from '../home';\nimport ErrorPage from '../error';\nimport ProtectedRoute from '../../router';\n\nconst Home = () => {\n  return (\n    <BrowserRouter\n      basename={process.env.PUBLIC_URL}\n    >\n      <Switch>\n        <ProtectedRoute exact path='/' component={HomePage} />\n        <Route path='/login' component={LoginPage} />\n        <Route path='/error' component={ErrorPage} />\n        <Redirect to=\"/error\" />\n      </Switch>\n    </BrowserRouter>\n  )\n}\nexport default Home;\n","export const initialState = {\n  isLoggedIn: JSON.parse(localStorage.getItem(\"isLoggedIn\")) || false,\n  user: JSON.parse(localStorage.getItem(\"user\")) || null,\n  client_id: process.env.REACT_APP_CLIENT_ID,\n  redirect_uri: process.env.REACT_APP_REDIRECT_URI,\n  client_secret: process.env.REACT_APP_CLIENT_SECRET,\n  proxy_url: process.env.REACT_APP_PROXY_URL\n};\n\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\": {\n      localStorage.setItem(\"isLoggedIn\", JSON.stringify(action.payload.isLoggedIn))\n      localStorage.setItem(\"user\", JSON.stringify(action.payload.user))\n      return {\n        ...state,\n        isLoggedIn: action.payload.isLoggedIn,\n        user: action.payload.user\n      };\n    }\n    case \"LOGOUT\": {\n      localStorage.clear()\n      return {\n        ...state,\n        isLoggedIn: false,\n        user: null\n      };\n    }\n    default:\n      return state;\n  }\n};","import React from 'react';\nimport { AuthContext } from './context';\n\nimport Main from './pages/main';\nimport { initialState, reducer } from \"./store/reducer\";\n\nconst App = () => {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        state,\n        dispatch\n      }}\n    >\n      <Main />\n    </AuthContext.Provider>\n  )\n};\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}